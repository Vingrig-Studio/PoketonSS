name: Deploy Bot to Server

on:
  push:
    branches:
      - main
  workflow_dispatch:  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v3
      
      - name: üêç Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: üì¶ Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      
      - name: ‚úÖ Test bot configuration
        env:
          TSSLG: ${{ secrets.TSSLG }}
        run: |
          echo "Testing bot configuration..."
          python3 -c "
          import os
          token = os.environ.get('TSSLG')
          if token and len(token) > 20:
              print('‚úÖ Token is configured correctly (TSSLG)')
          else:
              print('‚ùå Token is not configured')
              exit(1)
          "
      
      - name: üöÄ Deploy to server (optional)
        if: github.event_name == 'push'
        run: |
          echo "Deploying to server..."
          echo "Add your deployment commands here"
          # –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è:
          # scp -r * user@server:/path/to/bot/
          # ssh user@server 'systemctl restart telegram-bot'

